(this.webpackJsonppelicula=this.webpackJsonppelicula||[]).push([[0],{38:function(e,t,a){e.exports=a(67)},43:function(e,t,a){},44:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(34),s=a.n(i),l=(a(43),a(44),a(4)),o=a(9),c=a(10),m=a(12),u=a(11),p=a(5),d=a.n(p),v=a(2),h=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",confirmPassword:"",usernameError:"",passwordError:"",confirmPasswordError:""},e.inputChangeHandler=function(t){e.setState(Object(l.a)({},t.target.name,t.target.value))},e.register=function(){""===e.state.username?e.setState({usernameError:"This field is required"}):e.setState({usernameError:""}),""===e.state.password?e.setState({passwordError:"This field is required"}):e.setState({passwordError:""}),e.state.confirmPassword!==e.state.password?e.setState({confirmPasswordError:"Password didn't match"}):e.setState({confirmPasswordError:""}),""!==e.state.username&&""!==e.state.password&&e.state.password===e.state.confirmPassword&&(d.a.post("https://movie-booking-server.herokuapp.com/register",{username:e.state.username,password:e.state.password,role:"User"}).then((function(t){e.props.userCredential(e.state.username,e.state.password),e.setState({username:"",password:"",confirmPassword:""})})),alert("Registration successful!"))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"registration-form"},r.a.createElement("h4",null,"Register"),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"error-msg"},r.a.createElement("small",null,this.state.usernameError)),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",name:"password",onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"error-msg"},r.a.createElement("small",null,this.state.passwordError)),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",null,"Confirm Password: "),r.a.createElement("input",{type:"password",name:"confirmPassword",onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"error-msg"},r.a.createElement("small",null,this.state.confirmPasswordError)),r.a.createElement(v.b,{to:"/cinema"},r.a.createElement("button",{onClick:this.register},"Register")))}}]),a}(r.a.Component),E=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",usernameError:"",passwordError:""},e.inputChangeHandler=function(t){e.setState(Object(l.a)({},t.target.name,t.target.value))},e.login=function(){""===e.state.username.trim()?e.setState({usernameError:"This field is required"}):e.setState({usernameError:""}),""===e.state.password.trim()?e.setState({passwordError:"This field is required"}):e.setState({passwordError:""}),""!==e.state.username&&""!==e.state.password&&e.props.userCredential(e.state.username,e.state.password)},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"login-form"},r.a.createElement("h4",null,"Login"),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"error-msg"},r.a.createElement("small",null,this.state.usernameError)),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",name:"password",onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"error-msg"},r.a.createElement("small",null,this.state.passwordError)),r.a.createElement(v.b,{to:"/cinema"},r.a.createElement("button",{onClick:this.login},"Login")))}}]),a}(r.a.Component),g=Object(n.createContext)(),b=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={movieName:"",image:"",location:"",status:"",rating:"",genre:[],casts:[],description:"",price:null,cinemaNo:null,publishFrom:null,publishTo:null,startTime:""},e.dataChangeHandler=function(t){e.setState(Object(l.a)({},t.target.name,t.target.value))},e.arrayHandler=function(t){var a=t.target.value.split(",");e.setState(Object(l.a)({},t.target.name,a))},e.publishChangeHandler=function(t){e.setState(Object(l.a)({},t.target.name,new Date(t.target.value)))},e.addMovieBtnHandler=function(){var t={name:e.state.movieName,image:e.state.image,location:e.state.location,status:e.state.status,price:e.state.price,rating:e.state.rating,genre:e.state.genre,casts:e.state.casts,description:e.state.description,cinema:e.state.cinemaNo,publishFrom:e.state.publishFrom,publishTo:e.state.publishTo,start:e.state.startTime};e.props.addMovieBtn(t),e.setState({movieName:"",image:"",location:"",status:"",rating:"",genre:[],casts:[],description:""})},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"add-movie",className:"clearfix"},r.a.createElement("h3",null,"Add Movie"),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Movie Name : "),r.a.createElement("input",{type:"text",name:"movieName",value:this.state.movieName,onChange:this.dataChangeHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Status : "),r.a.createElement("select",{name:"status",value:this.state.status,onChange:this.dataChangeHandler},r.a.createElement("option",null,"Now Showing"),r.a.createElement("option",null,"Coming Soon"))),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Ticket Price : Php "),r.a.createElement("input",{type:"Number",name:"price",value:this.state.ticketPrice,onChange:this.dataChangeHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Rating : "),r.a.createElement("input",{type:"text",name:"rating",value:this.state.rating,onChange:this.dataChangeHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Genre : "),r.a.createElement("input",{type:"text",name:"genre",value:this.state.genre,onChange:this.arrayHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Casts : "),r.a.createElement("input",{type:"text",name:"casts",value:this.state.casts,onChange:this.arrayHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",{htmlFor:"desc"},"Description : "),r.a.createElement("textarea",{id:"desc",name:"description",rows:"4",value:this.state.description,onChange:this.dataChangeHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Location : "),r.a.createElement("input",{type:"text",name:"location",onChange:this.dataChangeHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Cinema # : "),r.a.createElement("input",{type:"number",name:"cinemaNo",onChange:this.dataChangeHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Image : "),r.a.createElement("input",{type:"text",name:"image",onChange:this.dataChangeHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Publish From : "),r.a.createElement("input",{type:"date",name:"publishFrom",onChange:this.publishChangeHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Publish To : "),r.a.createElement("input",{type:"date",name:"publishTo",onChange:this.publishChangeHandler})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Start Time : "),r.a.createElement("input",{type:"time",name:"startTime",onChange:this.dataChangeHandler})),r.a.createElement("button",{onClick:this.addMovieBtnHandler},"Add"))}}]),a}(r.a.Component),f=a(1),C=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={movieName:e.props.movie.name,image:e.props.movie.image,location:e.props.movie.location,status:e.props.movie.status,price:e.props.movie.price,rating:e.props.movie.rating,genre:e.props.movie.genre,casts:e.props.movie.casts,description:e.props.movie.description,cinemaNo:e.props.movie.cinema,publishFrom:e.props.movie.publishFrom,publishTo:e.props.movie.publishTo,startTime:e.props.movie.startTime},e.changeData=function(t){e.setState(Object(l.a)({},t.target.name,t.target.value))},e.setArray=function(t){var a=t.target.value.split(",");e.setState(Object(l.a)({},t.target.name,a))},e.changePublish=function(t){e.setState(Object(l.a)({},t.target.name,new Date(t.target.value)))},e.submitEditBtn=function(){d.a.put("https://movie-booking-server.herokuapp.com/movies/"+e.props.movie._id,{name:e.state.movieName,image:e.state.image,location:e.state.location,status:e.state.status,price:e.state.price,rating:e.state.rating,genre:e.state.genre,casts:e.state.casts,description:e.state.description,cinema:e.state.cinemaNo,publishFrom:e.state.publishFrom,publishTo:e.state.publishTo,start:e.state.startTime}).then((function(t){e.props.updateMovie(t.data)}))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"edit-form"},r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Movie Name : "),r.a.createElement("input",{type:"text",name:"movieName",value:this.state.movieName,onChange:this.changeData})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Status : "),r.a.createElement("select",{name:"status",value:this.state.status,onChange:this.changeData},r.a.createElement("option",null,"Now Showing"),r.a.createElement("option",null,"Coming Soon"))),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Ticket Price : "),r.a.createElement("input",{type:"number",name:"price",value:this.state.price,onChange:this.changeData})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Rating : "),r.a.createElement("input",{type:"text",name:"rating",value:this.state.rating,onChange:this.changeData})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Genre : "),r.a.createElement("input",{type:"text",name:"genre",value:this.state.genre,onChange:this.setArray})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Casts : "),r.a.createElement("input",{type:"text",name:"casts",value:this.state.casts,onChange:this.setArray})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",{htmlFor:"desc"},"Description : "),r.a.createElement("textarea",{id:"desc",name:"description",rows:"4",value:this.state.description,onChange:this.changeData})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Location : "),r.a.createElement("input",{type:"text",name:"location",value:this.state.location,onChange:this.changeData})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Cinema # : "),r.a.createElement("input",{type:"number",name:"cinemaNo",value:this.state.cinemaNo,onChange:this.changeData})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Image : "),r.a.createElement("input",{type:"text",name:"image",value:this.state.image,onChange:this.changeData})),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Publish From : "),r.a.createElement("input",{type:"date",name:"publishFrom",onChange:this.changePublish}),r.a.createElement("span",null,this.props.movie.publishFrom.slice(0,10))),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Publish To : "),r.a.createElement("input",{type:"date",name:"publishTo",onChange:this.changePublish}),r.a.createElement("span",null,this.props.movie.publishTo.slice(0,10))),r.a.createElement("div",{className:"movie-info"},r.a.createElement("label",null,"Start Time : "),r.a.createElement("input",{type:"time",name:"startTime",onChange:this.changeData}),r.a.createElement("span",null,this.props.movie.start)),r.a.createElement("button",{className:"edit-btn",onClick:this.submitEditBtn},"Edit"),r.a.createElement("button",{className:"delete-btn",id:this.props.movie._id,onClick:this.props.removeMovie},"Delete"))}}]),a}(r.a.Component),N=function(e){var t=Object(n.useContext)(g).removeMovie,a=e.movies.map((function(a){return r.a.createElement(f.a,{path:"/edit-form/"+a.name,key:a._id},r.a.createElement(C,{movie:a,updateMovie:e.updateMovie,removeMovie:t}))})),i=e.movies.map((function(e){return r.a.createElement(v.b,{to:"/edit-form/"+e.name,key:e._id},r.a.createElement("div",{className:"movie-info"},r.a.createElement("div",null,e.name),r.a.createElement("div",{className:"movie-status"},e.status)))}));return r.a.createElement("div",{id:"edit-movie"},r.a.createElement("h3",null,"Edit Movie"),r.a.createElement(v.b,{to:"/edit-movie"},"Edit/Remove"),r.a.createElement(f.a,{path:"/edit-movie"},i),a)},y=function(e){return r.a.createElement("div",{id:"product-info"},r.a.createElement(b,{addMovieBtn:e.addMovieBtn}),r.a.createElement(N,{movies:e.movies,updateMovie:e.updateMovie}))},k=function(e){return r.a.createElement(f.a,{path:"/now-showing"},r.a.createElement("div",{id:"now-showing",className:"clearfix"},r.a.createElement("h4",null,e.movie),r.a.createElement("img",{className:"movie-img",src:e.image,alt:e.movie}),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Genre: "),e.genre),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Rating: "),e.rating),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Casts: "),e.casts),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Description: "),e.description),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Status: "),e.status),r.a.createElement("button",{className:"buyoutBtn",id:e.id,onClick:e.purchaseBtn},"Buy Ticket")),r.a.createElement("hr",null))},w=function(e){var t=e.showDate.slice(0,10);return r.a.createElement(f.a,{path:"/coming-soon"},r.a.createElement("div",{id:"coming-soon"},r.a.createElement("h4",null,e.movie),r.a.createElement("img",{className:"movie-img",src:e.image,alt:e.movie}),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Genre: "),e.genre),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Rating: "),e.rating),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Casts: "),e.casts),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Description: "),e.description),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Status: "),e.status),r.a.createElement("p",null,r.a.createElement("small",{className:"label"},"Show Date: "),t)),r.a.createElement("hr",null))},S=function(e){return r.a.createElement("div",{id:"cinemas",className:"clearfix"},r.a.createElement(f.a,{path:"/cinema"},e.cinema," || ",e.hall," || ",e.movie.name))},O=function(e){var t=Object(n.useContext)(g).qtyChangeHandler;return r.a.createElement("div",{id:"tickets"},r.a.createElement("div",null,e.ticket.name),r.a.createElement("input",{type:"number",value:e.ticket.qty,onChange:function(a){t(e.ticket._id,1*a.target.value)}}),r.a.createElement("div",null,e.ticket.subTotal))},j=function(){var e=Object(n.useContext)(g),t=e.purchaseOffBtn,a=e.tickets,i=e.total,s=e.checkoutBtn,l=null,o=null;return a.length>0&&(l=a.map((function(e){return r.a.createElement(O,{key:e.name,ticket:e})})),o=r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("div",null,"Total: ",r.a.createElement("span",null,"Php ",i)))),r.a.createElement(r.a.Fragment,null,a.length>0?r.a.createElement("div",{id:"purchase-box"},r.a.createElement("h3",null,"Tickets",r.a.createElement("button",{onClick:t,id:"close-cart"},"X")),r.a.createElement("div",{className:"tickets"},l),o,null!==o?r.a.createElement("button",{onClick:s},"Checkout"):""):"")},T=function(){var e=Object(n.useContext)(g),t=e.movies,a=e.cinemas,i=e.purchaseOn,s=e.purchaseOnBtn,l=a.map((function(e){return r.a.createElement(v.b,{to:"/cinemas/"+e._id,key:e._id},r.a.createElement(S,{cinema:e.cinema,hall:e.hall,movie:e.movie}))})),o=t.filter((function(e){return"Now Showing"===e.status})),c=t.filter((function(e){return"Coming Soon"===e.status})),m=o.map((function(e){return r.a.createElement(k,{key:e._id,id:e._id,movie:e.name,image:e.image,location:e.location,genre:e.genre,rating:e.rating,casts:e.casts,description:e.description,status:e.status,purchaseBtn:function(){return s(e)}})})),u=c.map((function(e){return r.a.createElement(w,{key:e._id,id:e._id,movie:e.name,image:e.image,location:e.location,genre:e.genre,rating:e.rating,casts:e.casts,description:e.description,status:e.status,showDate:e.publishFrom})}));return r.a.createElement("div",{id:"movie-list"},r.a.createElement("div",{id:"mov-content"},r.a.createElement("div",{id:"nav-mov"},r.a.createElement(v.b,{to:"/cinema"},"Cinema"),r.a.createElement(v.b,{to:"/now-showing"},"Now Showing"),r.a.createElement(v.b,{to:"/coming-soon"},"Coming Soon")),l,m,i?r.a.createElement(j,null):"",u))},B=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={cinema:{seats:[],movie:{name:"",publishFrom:"",publishTo:""}},date:""},e.dateChangeHandler=function(t){e.setState({date:t.target.value})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;d()("https://movie-booking-server.herokuapp.com/cinemas/"+this.props.match.params.id).then((function(t){var a=t.data;e.setState({cinema:a})}))}},{key:"render",value:function(){var e=this.state.cinema.seats.map((function(e){return r.a.createElement("button",{key:e._id,className:"seat-map"},e.seat)}));return r.a.createElement("div",{id:"seats"},r.a.createElement("div",null,this.state.cinema.cinema," || ",this.state.cinema.hall," || ",this.state.cinema.movie.name),r.a.createElement("div",{id:"select-date"},r.a.createElement("label",null,"Select a Date "),r.a.createElement("input",{type:"date",name:"selectedDate",value:this.state.date,min:this.state.cinema.movie.publishFrom.slice(0,10),max:this.state.cinema.movie.publishTo.slice(0,10),onChange:this.dateChangeHandler})),e)}}]),a}(r.a.Component),M=a(37),x=function(){var e=Object(n.useState)(""),t=Object(M.a)(e,2),a=t[0],i=t[1];return r.a.createElement("div",{id:"search-component"},r.a.createElement("input",{type:"text",placeholder:"Search a movie...",className:"searchbox",onChange:function(e){var t=e.target.value;i(t),console.log(a)}}),r.a.createElement("button",null,"Search"))},H=function(e){var t=e.movies.map((function(e){return r.a.createElement("div",{key:e._id,className:"movies-array"},r.a.createElement("div",null,e.status),r.a.createElement("img",{alt:e.name,src:e.image}),r.a.createElement("div",null,e.name))}));return r.a.createElement("div",{id:"home-page"},t)},P=function(){var e=Object(n.useContext)(g),t=e.isLoggedin,a=e.userCredential,i=e.userLogin,s=e.logout,l=e.user,o=e.addMovieBtn,c=e.movies,m=e.updateMovie,u=e.seats.map((function(e){return e}));return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(v.b,{to:"/pelicula"},r.a.createElement("div",{id:"logo"},r.a.createElement("img",{src:"https://i.pinimg.com/originals/90/91/25/909125082e30bbc87ace7cdef68fbb4f.jpg",alt:"Boleto Films"}),r.a.createElement("h1",null,"Pelicula"))),r.a.createElement(x,null),t?r.a.createElement(v.b,{to:"/pelicula"},r.a.createElement("button",{onClick:s,id:"logoutBtn"},"Logout")):r.a.createElement("div",{id:"sign-in"},r.a.createElement(v.b,{to:"/register"},"Register")," / ",r.a.createElement(v.b,{to:"/login"},"Sign in"))),t?r.a.createElement("div",null,"Admin"===l.role?r.a.createElement("div",null,r.a.createElement(y,{addMovieBtn:o,movies:c,updateMovie:m})):r.a.createElement("div",null,r.a.createElement(T,{selectedSeat:u}),r.a.createElement(f.a,{path:"/cinemas/:id",render:function(e){return r.a.createElement(B,Object.assign({},e,{movies:c}))}}))):r.a.createElement("div",null,r.a.createElement(f.a,{path:"/pelicula",exact:!0},r.a.createElement("div",{id:"home"},r.a.createElement("h2",null,"Movies"),r.a.createElement(H,{movies:c}))),r.a.createElement(f.a,{path:"/register"},r.a.createElement(h,{userCredential:a,userLogin:i})),r.a.createElement(f.a,{path:"/login"},r.a.createElement(E,{userCredential:a,userLogin:i,user:l}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(36),F=a(18),_=a(22),L=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).userLogin=function(){e.setState({isLoggedin:!0})},e.userCredential=function(t,a){d.a.post("https://movie-booking-server.herokuapp.com/users/login",{username:t,password:a}).then((function(t){t.data.error?alert("Invalid username/password"):(localStorage.setItem("appUser",JSON.stringify(t.data)),e.userLogin(),e.setState({user:t.data}))}))},e.logout=function(){localStorage.removeItem("appUser"),e.setState({isLoggedin:!1})},e.addMovieBtn=function(t){d.a.post("https://movie-booking-server.herokuapp.com/movies",t).then((function(t){e.setState({movies:[].concat(Object(F.a)(e.state.movies),[t.data])})}))},e.updateMovie=function(t){var a=e.state.movies.map((function(e){return t._id===e._id?t:e}));e.setState({movies:a})},e.removeMovie=function(t){var a=Object(F.a)(e.state.movies);a.map((function(e){return t.target.id===e._id&&a.splice(a.indexOf(e),1),a})),e.setState({movies:a}),d.a.delete("https://movie-booking-server.herokuapp.com/movies/"+t.target.id)},e.purchaseOnBtn=function(t){var a=Object(D.a)({},t),n=e.state.tickets.findIndex((function(e){return e._id===a._id})),r=Object(_.cloneDeep)(e.state.tickets),i=e.state.total+a.price;n>-1?(r[n].user=e.state.user.username,r[n].qty=1*r[n].qty+1,r[n].subTotal+=a.price):(a.qty=1,a.subTotal=a.price,a.user=e.state.user.username,r=[].concat(Object(F.a)(e.state.tickets),[a])),e.setState({purchaseOn:!0,total:i,tickets:r})},e.purchaseOffBtn=function(){e.setState({purchaseOn:!1})},e.qtyChangeHandler=function(t,a){var n=Object(_.cloneDeep)(e.state.tickets),r=0;n=n.map((function(e){return e._id===t&&(e.qty=a,e.subTotal=e.price*a),r+=e.subTotal,e})),e.setState({tickets:n,total:r})},e.checkoutBtn=function(){d.a.post("https://movie-booking-server.herokuapp.com/transactions",{tickets:e.state.tickets,total:e.state.total}).then((function(t){e.setState({tickets:[],total:0})}))},e.state={isLoggedin:!!localStorage.getItem("appUser"),user:localStorage.getItem("appUser")?JSON.parse(localStorage.getItem("appUser")):{},movies:[],cinemas:[],seats:[],tickets:[],total:0,purchaseOn:!1,userLogin:e.userLogin,userCredential:e.userCredential,logout:e.logout,addMovieBtn:e.addMovieBtn,updateMovie:e.updateMovie,removeMovie:e.removeMovie,purchaseOnBtn:e.purchaseOnBtn,purchaseOffBtn:e.purchaseOffBtn,qtyChangeHandler:e.qtyChangeHandler,checkoutBtn:e.checkoutBtn,searchBtn:e.searchBtn},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;d()("https://movie-booking-server.herokuapp.com/movies").then((function(t){var a=t.data;e.setState({movies:a})})),d()("https://movie-booking-server.herokuapp.com/cinemas").then((function(t){var a=t.data;e.setState({cinemas:a})})),d()("https://movie-booking-server.herokuapp.com/seats").then((function(t){var a=t.data;e.setState({seats:a})}))}},{key:"render",value:function(){return r.a.createElement(g.Provider,{value:this.state},this.props.children)}}]),a}(r.a.Component);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null,r.a.createElement(v.a,null,r.a.createElement(P,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.9a4649fb.chunk.js.map